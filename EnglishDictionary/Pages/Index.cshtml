@page
@model IndexModel
@{
    ViewData["Title"] = "Look for definitions";
}

<div class="text-center">
    <h1 class="display-4">Enter a word</h1>
    <h2>
        <input id="wordBox" placeholder="Definition look up" />
        <a id="searchBtn" class="btn btn-primary">Search</a>
        <a class="speak-btn btn btn-success">Speak</a>
    </h2>
   <p class="subtitle">Will return dictionary definition</p>
</div>
<div class="row">
    <div class="suggestions col-sm-2"></div>
    <article class="col-sm-10"></article>
</div>

@section Scripts{
    <script>
        window.addEventListener("load", (event) => {
            
            let btnSearch = document.querySelector("#searchBtn");
            let searchBox = document.querySelector("#wordBox");
            let speakBtn = document.querySelector(".speak-btn");
            DictionarySite.btnSearch=btnSearch;
            DictionarySite.searchBox=searchBox;
            btnSearch.addEventListener('click', function () {
                if (!searchBox.value){
                    searchBox.value="blank";
                }
                DictionarySite.getMeaning(searchBox.value, "article");
            });
            searchBox.addEventListener("keypress", function (event) {
                // If the user presses the "Enter" key on the keyboard
                if (event.key === "Enter") {
                    // Cancel the default action, if needed
                    event.preventDefault();
                    // Trigger the button element with a click
                    btnSearch.click();
                }
            });
            speakBtn.addEventListener('click', (event) => {
                event.preventDefault();
                if (!searchBox.value) {
                    searchBox.value = "blank";
                }
               
                if ('speechSynthesis' in window) {
                     var msg = new SpeechSynthesisUtterance();
                msg.text = searchBox.value;
                window.speechSynthesis.speak(msg);
                } else {
                    // Speech Synthesis Not Supported 😣
                    document.querySelector("p.subtitle")("Sorry, your browser doesn't support text to speech!");
                }

            });
        });
    </script>
}